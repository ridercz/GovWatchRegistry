(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.ES6Promise=t()})(this,function(){"use strict";function pt(n){var t=typeof n;return n!==null&&(t==="object"||t==="function")}function ut(n){return typeof n=="function"}function wt(n){b=n}function bt(n){r=n}function gt(){return function(){return process.nextTick(e)}}function ni(){return typeof w!="undefined"?function(){w(e)}:k()}function ti(){var n=0,i=new ht(e),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function ii(){var n=new MessageChannel;return n.port1.onmessage=e,function(){return n.port2.postMessage(0)}}function k(){var n=setTimeout;return function(){return n(e,1)}}function e(){for(var t,i,n=0;n<f;n+=2)t=u[n],i=u[n+1],t(i),u[n]=undefined,u[n+1]=undefined;f=0}function ri(){try{var t=require,n=t("vertx");return w=n.runOnLoop||n.runOnContext,ni()}catch(i){return k()}}function g(n,t){var e=arguments,f=this,i=new this.constructor(o),u;return i[c]===undefined&&yt(i),u=f._state,u?function(){var n=e[u-1];r(function(){return vt(u,i,n,f._result)})}():tt(f,i,n,t),i}function nt(n){var i=this,t;return n&&typeof n=="object"&&n.constructor===i?n:(t=new i(o),v(t,n),t)}function o(){}function ui(){return new TypeError("You cannot resolve a promise with itself")}function fi(){return new TypeError("A promises callback cannot return that same promise.")}function ct(n){try{return n.then}catch(t){return a.error=t,a}}function ei(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function oi(n,u,f){r(function(n){var r=!1,e=ei(f,u,function(t){r||(r=!0,u!==t?v(n,t):i(n,t))},function(i){r||(r=!0,t(n,i))},"Settle: "+(n._label||" unknown promise"));!r&&e&&(r=!0,t(n,e))},n)}function si(n,r){r._state===l?i(n,r._result):r._state===h?t(n,r._result):tt(r,undefined,function(t){return v(n,t)},function(i){return t(n,i)})}function lt(n,r,u){r.constructor===n.constructor&&u===g&&r.constructor.resolve===nt?si(n,r):u===a?(t(n,a.error),a.error=null):u===undefined?i(n,r):ut(u)?oi(n,r,u):i(n,r)}function v(n,r){n===r?t(n,ui()):pt(r)?lt(n,r,ct(r)):i(n,r)}function hi(n){n._onerror&&n._onerror(n._result);it(n)}function i(n,t){n._state===s&&(n._result=t,n._state=l,n._subscribers.length!==0&&r(it,n))}function t(n,t){n._state===s&&(n._state=h,n._result=t,r(hi,n))}function tt(n,t,i,u){var f=n._subscribers,e=f.length;n._onerror=null;f[e]=t;f[e+l]=i;f[e+h]=u;e===0&&n._state&&r(it,n)}function it(n){var i=n._subscribers,f=n._state,t;if(i.length!==0){var r=undefined,u=undefined,e=n._result;for(t=0;t<i.length;t+=3)r=i[t],u=i[t+f],r?vt(f,r,u,e):u(e);n._subscribers.length=0}}function at(){this.error=null}function ci(n,t){try{return n(t)}catch(i){return p.error=i,p}}function vt(n,r,u,f){var c=ut(u),e=undefined,a=undefined,o=undefined,y=undefined;if(c){if(e=ci(u,f),e===p?(y=!0,a=e.error,e.error=null):o=!0,r===e){t(r,fi());return}}else e=f,o=!0;r._state!==s||(c&&o?v(r,e):y?t(r,a):n===l?i(r,e):n===h&&t(r,e))}function li(n,i){try{i(function(t){v(n,t)},function(i){t(n,i)})}catch(r){t(n,r)}}function ai(){return rt++}function yt(n){n[c]=rt++;n._state=undefined;n._result=undefined;n._subscribers=[]}function y(n,r){this._instanceConstructor=n;this.promise=new n(o);this.promise[c]||yt(this.promise);et(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),this.length===0?i(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),this._remaining===0&&i(this.promise,this._result))):t(this.promise,vi())}function vi(){return new Error("Array Methods must be provided an Array")}function yi(n){return new y(this,n).promise}function pi(n){var t=this;return et(n)?new t(function(i,r){for(var f=n.length,u=0;u<f;u++)t.resolve(n[u]).then(i,r)}):new t(function(n,t){return t(new TypeError("You must pass an array to race."))})}function wi(n){var r=this,i=new r(o);return t(i,n),i}function bi(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function ki(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function n(t){this[c]=ai();this._result=this._state=undefined;this._subscribers=[];o!==t&&(typeof t!="function"&&bi(),this instanceof n?li(this,t):ki())}function di(){var t=undefined,i,r;if(typeof global!="undefined")t=global;else if(typeof self!="undefined")t=self;else try{t=Function("return this")()}catch(u){throw new Error("polyfill failed because global object is unavailable in this environment");}if(i=t.Promise,i){r=null;try{r=Object.prototype.toString.call(i.resolve())}catch(u){}if(r==="[object Promise]"&&!i.cast)return}t.Promise=n}var ft=undefined,u,d,c,p,rt;ft=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};var et=ft,f=0,w=undefined,b=undefined,r=function(n,t){u[f]=n;u[f+1]=t;f+=2;f===2&&(b?b(e):d())};var ot=typeof window!="undefined"?window:undefined,st=ot||{},ht=st.MutationObserver||st.WebKitMutationObserver,kt=typeof self=="undefined"&&typeof process!="undefined"&&{}.toString.call(process)==="[object process]",dt=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";u=new Array(1e3);d=undefined;d=kt?gt():ht?ti():dt?ii():ot===undefined&&typeof require=="function"?ri():k();c=Math.random().toString(36).substring(16);var s=void 0,l=1,h=2,a=new at;return p=new at,rt=0,y.prototype._enumerate=function(n){for(var t=0;this._state===s&&t<n.length;t++)this._eachEntry(n[t],t)},y.prototype._eachEntry=function(t,i){var r=this._instanceConstructor,e=r.resolve,u,f;e===nt?(u=ct(t),u===g&&t._state!==s?this._settledAt(t._state,i,t._result):typeof u!="function"?(this._remaining--,this._result[i]=t):r===n?(f=new r(o),lt(f,t,u),this._willSettleAt(f,i)):this._willSettleAt(new r(function(n){return n(t)}),i)):this._willSettleAt(e(t),i)},y.prototype._settledAt=function(n,r,u){var f=this.promise;f._state===s&&(this._remaining--,n===h?t(f,u):this._result[r]=u);this._remaining===0&&i(f,this._result)},y.prototype._willSettleAt=function(n,t){var i=this;tt(n,undefined,function(n){return i._settledAt(l,t,n)},function(n){return i._settledAt(h,t,n)})},n.all=yi,n.race=pi,n.resolve=nt,n.reject=wi,n._setScheduler=wt,n._setAsap=bt,n._asap=r,n.prototype={constructor:n,then:g,"catch":function(n){return this.then(null,n)}},n.polyfill=di,n.Promise=n,n.polyfill(),n}),function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?exports.aspnetValidation=t():n.aspnetValidation=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i.d(t,"MvcValidationProviders",function(){return r});i.d(t,"ValidationService",function(){return e});var u=this&&this.__awaiter||function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},f=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=u[e[0]&2?"return":e[0]?"throw":"next"])&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[0,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},r=function(){function n(){this.required=function(n){return Boolean(n)};this.stringLength=function(n,t,i){var r,u;return n?i.min&&(r=parseInt(i.min),n.length<r)?!1:i.max&&(u=parseInt(i.max),n.length>u)?!1:!0:!0};this.compare=function(n,t,i){if(!i.other)return!0;var r=document.getElementById(i.other.substr(2));return r?r.value===n:!0};this.range=function(n,t,i){var r,u,f;return n?(r=parseFloat(n),isNaN(r))?!1:i.min&&(u=parseFloat(i.min),r<u)?!1:i.max&&(f=parseFloat(i.max),r>f)?!1:!0:!0};this.regex=function(n,t,i){if(!n||!i.pattern)return!0;var r=new RegExp(i.pattern);return r.test(n)};this.email=function(n){if(!n)return!0;return/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$/.test(n)};this.creditcard=function(n){if(!n)return!0;if(/[^0-9 \-]+/.test(n))return!1;var u=0,t=0,r=!1,i,f;if(n=n.replace(/\D/g,""),n.length<13||n.length>19)return!1;for(i=n.length-1;i>=0;i--)f=n.charAt(i),t=parseInt(f,10),r&&(t*=2)>9&&(t-=9),u+=t,r=!r;return u%10==0};this.url=function(n){if(!n)return!0;var t=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return t.test(n)};this.phone=function(n){var t,i;return n?(t=/[\+\-\s][\-\s]/g,t.test(n))?!1:(i=/^\+?[0-9\-\s]+$/,i.test(n)):!0};this.remote=function(n,t,i){return n?new Promise(function(r,u){for(var h,e,f,o=i.url+"?"+t.name+"="+encodeURIComponent(n),c=i.additionalfields.split(","),s=0;s<c.length;s++)(h=c[s].substr(2),h!==t.name)&&(e=document.getElementById(h),e&&e.value)&&(o=o+"&"+e.name+"="+encodeURIComponent(e.value));f=new XMLHttpRequest;f.open("get",o);f.onload=function(){if(f.status>=200&&f.status<300){var n=JSON.parse(f.responseText);r(n)}else u({status:f.status,statusText:f.statusText,data:f.responseText})};f.onerror=function(){u({status:f.status,statusText:f.statusText,data:f.responseText})};f.send()}):!0}}return n}(),e=function(){function n(){this.providers={};this.messageFor={};this.elementUIDs=[];this.elementByUID={};this.formInputs={};this.validators={};this.elementEvents={};this.summary={};this.debounce=300}return n.prototype.addProvider=function(n,t){this.providers[n]||(this.providers[n]=t)},n.prototype.addMvcProviders=function(){var n=new r;this.addProvider("required",n.required);this.addProvider("length",n.stringLength);this.addProvider("maxlength",n.stringLength);this.addProvider("minlength",n.stringLength);this.addProvider("equalto",n.compare);this.addProvider("range",n.range);this.addProvider("regex",n.regex);this.addProvider("creditcard",n.creditcard);this.addProvider("email",n.email);this.addProvider("url",n.url);this.addProvider("phone",n.phone);this.addProvider("remote",n.remote)},n.prototype.scanMessages=function(){for(var i,n,r=document.querySelectorAll("[data-valmsg-for]"),t=0;t<r.length;t++)i=r[t],n=i.getAttribute("data-valmsg-for"),this.messageFor[n]||(this.messageFor[n]=[]),this.messageFor[n].push(i)},n.prototype.parseDirectives=function(n){for(var i,e,r,f={},t={},o=9,u=0;u<n.length;u++)i=n[u],i.name.indexOf("data-val-")===0&&(r=i.name.substr(o),t[r]=i.value);e=function(n){var i,e,o;if(n.indexOf("-")===-1){var r=Object.keys(t).filter(function(t){return t!==n&&t.indexOf(n)===0}),u={error:t[n],params:{}},s=(n+"-").length;for(i=0;i<r.length;i++)e=t[r[i]],o=r[i].substr(s),u.params[o]=e;f[n]=u}};for(r in t)e(r);return f},n.prototype.guid4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},n.prototype.getElementUID=function(n){var i=this.elementUIDs.filter(function(t){return t.node===n})[0],t;return i?i.uid:(t=this.guid4(),this.elementUIDs.push({node:n,uid:t}),this.elementByUID[t]=n,t)},n.prototype.getFormValidationTask=function(n){var t=this.formInputs[n],r,i,u,f;if(!t||t.length===0)return null;for(r=[],i=0;i<t.length;i++)u=t[i],r.push(this.validators[u]);return f=r.map(function(n){return n()}),Promise.all(f).then(function(n){return n.every(function(n){return n})})},n.prototype.trackFormInput=function(n,t){var r=this,i=this.getElementUID(n),f,u;(this.formInputs[i]||(this.formInputs[i]=[]),f=this.formInputs[i].indexOf(t)===-1,f&&this.formInputs[i].push(t),this.elementEvents[i])||(u=function(t){var u=r.getFormValidationTask(i);u&&(t.preventDefault(),u.then(function(t){t&&n.submit()}).catch(function(n){console.log(n)}))},n.addEventListener("submit",u),n.addEventListener("reset",function(){for(var e,n,t,u,s=r.formInputs[i],f=0,o=s;f<o.length;f++){if(e=o[f],n=r.elementByUID[e],n.classList.remove("input-validation-error"),n.classList.remove("input-validation-valid"),t=r.messageFor[n.name],t)for(u=0;u<t.length;u++)t[u].innerHTML="";delete r.summary[e]}r.renderSummary()}),this.elementEvents[i]=u)},n.prototype.addInput=function(n){var r=this,t=this.getElementUID(n),e=this.parseDirectives(n.attributes),o=this.createValidator(n,e),u,i,f;(this.validators[t]=o,this.trackFormInput(n.form,t),this.elementEvents[t])||(i=function(){var n=r.validators[t];clearTimeout(u);u=setTimeout(n,r.debounce)},f=n.tagName.toLowerCase()==="select",f?n.addEventListener("change",i):n.addEventListener("input",i),this.elementEvents[t]=i)},n.prototype.scanInputs=function(){for(var i,t=document.querySelectorAll('[data-val="true"]'),n=0;n<t.length;n++)i=t[n],this.addInput(i)},n.prototype.createSummaryDOM=function(){var n,i,t;if(!Object.keys(this.summary).length)return null;n=document.createElement("ul");for(i in this.summary)t=document.createElement("li"),t.innerHTML=this.summary[i],n.appendChild(t);return n},n.prototype.renderSummary=function(){var i=document.querySelectorAll('[data-valmsg-summary="true"]'),r,u,t,n;if(i.length&&(r=JSON.stringify(this.summary,Object.keys(this.summary).sort()),r!==this.renderedSummaryJSON))for(this.renderedSummaryJSON=r,u=this.createSummaryDOM(),t=0;t<i.length;t++)n=i[t],n.innerHTML="",u?(n.className="validation-summary-error",n.appendChild(u.cloneNode(!0))):n.className="validation-summary-valid"},n.prototype.addError=function(n,t){var r=this.messageFor[n.name],i,u;if(r)for(i=0;i<r.length;i++)r[i].innerHTML=t,r[i].className="field-validation-error";n.classList.remove("input-validation-valid");n.classList.add("input-validation-error");u=this.getElementUID(n);this.summary[u]=t;this.renderSummary()},n.prototype.removeError=function(n){var i=this.messageFor[n.name],t,r;if(i)for(t=0;t<i.length;t++)i[t].innerHTML="",i[t].className="field-validation-valid";n.classList.remove("input-validation-error");n.classList.add("input-validation-valid");r=this.getElementUID(n);delete this.summary[r];this.renderSummary()},n.prototype.createValidator=function(n,t){var i=this;return function(){return u(i,void 0,void 0,function(){var u,a,e,o,c,l,i,r,s,h;return f(this,function(f){switch(f.label){case 0:u=[];for(a in t)u.push(a);e=0;f.label=1;case 1:return(e<u.length)?(o=u[e],c=t[o],l=this.providers[o],!l)?(console.log("aspnet-validation provider not implemented: "+o),[3,6]):(i=l(n.value,n,c.params),r=!1,s=c.error,!(typeof i=="boolean"))?[3,2]:(r=i,[3,5]):[3,7];case 2:return(typeof i=="string")?(r=!1,s=i,[3,5]):[3,3];case 3:return[4,i];case 4:h=f.sent();typeof h=="boolean"?r=h:(r=!1,s=h);f.label=5;case 5:if(!r)return this.addError(n,s),[2,!1];f.label=6;case 6:return e++,[3,1];case 7:return this.removeError(n),[2,!0]}})})}},n.prototype.bootstrap=function(){var n=this;this.addMvcProviders();document.addEventListener("DOMContentLoaded",function(){n.scanMessages();n.scanInputs()})},n}()}])});